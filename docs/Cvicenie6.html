<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Cvičenie 6 - Modelovanie volatility - GARCH a kamaráti</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Alex Babiš</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Cvicenie1_new.html">Tutorial 1</a>
    </li>
    <li>
      <a href="Cvicenia2_new.html">Tutorial 2</a>
    </li>
    <li>
      <a href="Cvicenie3.html">Tutorial 3</a>
    </li>
    <li>
      <a href="Cvicenie4_new.html">Tutorial 4</a>
    </li>
    <li class="dropdown-header">Tutorial 5</li>
    <li>
      <a href="Cvicenie6_new.html">Tutorial 6</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Homeworks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Domaca_uloha1.html">Homework 1</a>
    </li>
    <li>
      <a href="Domaca_uloha2.html">Homework 2</a>
    </li>
    <li>
      <a href="Domaca_uloha3.html">Homework 3</a>
    </li>
    <li>
      <a href="Domaca_uloha4.html">Homework 4</a>
    </li>
    <li>
      <a href="Domaca_uloha5.html">Homework 5</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Cvičenie 6 - Modelovanie volatility - GARCH
a kamaráti</h1>

</div>


<div id="potrebne-knižnice-pre-cvičenie-6" class="section level1"
number="1">
<h1><span class="header-section-number">1</span> Potrebne knižnice pre
cvičenie 6</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fGarch)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(astsa)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quantmod)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(urca)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggfortify)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span></code></pre></div>
</div>
<div id="dáta-1---ceny-akcie-apple" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Dáta 1 - ceny akcie
Apple</h1>
<p>V prvej časti budeme, tak ako na prednáške, pracovať s logaritmickými
výnosmi pre ceny akcií. Konkrétne sa pozrieme na výnosy akcie
<code>AAPL</code> (Apple):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;AAPL&quot;</span>,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">from =</span> <span class="st">&quot;2016-01-01&quot;</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">to =</span> <span class="st">&quot;2021-01-01&quot;</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">auto.assign =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] &quot;AAPL&quot;</code></pre>
<p>Budeme pracovať s týždennými dátami.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>AAPL.tyzden <span class="ot">&lt;-</span> <span class="fu">to.weekly</span>(AAPL)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(AAPL.tyzden)</span></code></pre></div>
<pre><code>##            AAPL.Open AAPL.High AAPL.Low AAPL.Close AAPL.Volume AAPL.Adjusted
## 2016-01-08   25.6525   26.4625  24.1075    24.2400  1375160800      22.19127
## 2016-01-15   24.7425   25.2975  23.8400    24.2825  1217348800      22.23018
## 2016-01-22   24.6025   25.3650  23.3550    25.3550   973536400      23.21204
## 2016-01-29   25.3800   25.3825  23.0975    24.3350  1521346000      22.27825
## 2016-02-05   24.1175   24.3325  23.4225    23.5050   868619200      21.63516
## 2016-02-12   23.2825   24.0875  23.1475    23.4975   924489200      21.62825</code></pre>
<p>Transformácia cien na logaritmické výnosy:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>ceny <span class="ot">&lt;-</span> AAPL.tyzden<span class="sc">$</span>AAPL.Adjusted</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>vynosy <span class="ot">&lt;-</span> <span class="fu">diff</span>(<span class="fu">log</span>(ceny))</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>vynosy <span class="ot">&lt;-</span> vynosy[<span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<p>Vykreslenie dát</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chartSeries</span>(vynosy, <span class="at">theme=</span><span class="fu">chartTheme</span>(<span class="st">&#39;white&#39;</span>,<span class="at">up.col=</span><span class="st">&quot;#009E73&quot;</span>))</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Skontrolujeme dáta, či v nich náhodou nie je jednotkový koreň:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(vynosy)<span class="sc">+</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;green&quot;</span>)<span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">mean</span>(vynosy), <span class="at">color =</span> <span class="st">&quot;orange&quot;</span>)</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Obe čiary sú dosť pri sebe, použijeme type = “none”</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">ur.df</span>(vynosy, <span class="at">lags =</span> <span class="dv">5</span>, <span class="at">selectlags =</span> <span class="st">&quot;BIC&quot;</span>, <span class="at">type =</span> <span class="st">&quot;none&quot;</span>))</span></code></pre></div>
<pre><code>## 
## ############################################### 
## # Augmented Dickey-Fuller Test Unit Root Test # 
## ############################################### 
## 
## Test regression none 
## 
## 
## Call:
## lm(formula = z.diff ~ z.lag.1 - 1 + z.diff.lag)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.195832 -0.012565  0.008102  0.027572  0.138671 
## 
## Coefficients:
##            Estimate Std. Error t value Pr(&gt;|t|)    
## z.lag.1    -0.87593    0.08686 -10.084   &lt;2e-16 ***
## z.diff.lag -0.08368    0.06287  -1.331    0.184    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.03966 on 252 degrees of freedom
## Multiple R-squared:  0.4819, Adjusted R-squared:  0.4778 
## F-statistic: 117.2 on 2 and 252 DF,  p-value: &lt; 2.2e-16
## 
## 
## Value of test-statistic is: -10.0839 
## 
## Critical values for test statistics: 
##       1pct  5pct 10pct
## tau1 -2.58 -1.95 -1.62</code></pre>
<p>Hypotézu o jednotkovom koreni zamietame, takže dáta nebude treba
differencovať.</p>
<p>Vykreslíme si ACF a PACF pre naše dáta</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf2</span>(vynosy)</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre><code>##      [,1] [,2] [,3] [,4]  [,5]  [,6]  [,7] [,8]  [,9] [,10] [,11] [,12] [,13]
## ACF  0.01 0.05 0.06 0.01 -0.07 -0.01 -0.05 0.02 -0.01 -0.03 -0.02  0.03 -0.03
## PACF 0.01 0.05 0.06 0.01 -0.08 -0.01 -0.04 0.03  0.00 -0.03 -0.02  0.03 -0.02
##      [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25]
## ACF   -0.1 -0.04 -0.07 -0.01  0.04 -0.09 -0.08  0.00 -0.05 -0.10  0.04  0.03
## PACF  -0.1 -0.05 -0.06  0.01  0.05 -0.10 -0.10 -0.02 -0.04 -0.09  0.03  0.03
##      [,26] [,27]
## ACF   0.12  0.04
## PACF  0.11  0.02</code></pre>
<p>Vidíme, že podľa ACF aj PACF by sme dáta mohli modelovať ako
konštanta + biely šum.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.00</span> <span class="ot">&lt;-</span> <span class="fu">capture.output</span>(<span class="fu">sarima</span>(vynosy,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.00</span> <span class="ot">&lt;-</span> <span class="fu">sarima</span>(vynosy,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="at">details =</span> <span class="cn">FALSE</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.00</span></span></code></pre></div>
<pre><code>## $fit
## 
## Call:
## arima(x = xdata, order = c(p, d, q), seasonal = list(order = c(P, D, Q), period = S), 
##     xreg = xmean, include.mean = FALSE, transform.pars = trans, fixed = fixed, 
##     optim.control = list(trace = trc, REPORT = 1, reltol = tol))
## 
## Coefficients:
##        xmean
##       0.0068
## s.e.  0.0024
## 
## sigma^2 estimated as 0.00151:  log likelihood = 475.49,  aic = -946.97
## 
## $degrees_of_freedom
## [1] 259
## 
## $ttable
##       Estimate     SE t.value p.value
## xmean   0.0068 0.0024  2.8339   0.005
## 
## $AIC
## [1] -3.642206
## 
## $AICc
## [1] -3.642146
## 
## $BIC
## [1] -3.614816</code></pre>
<p>Porovnáme si ACF pre rezídua a pre ich druhé mocniny:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf1</span>(vynosy<span class="fl">.00</span><span class="sc">$</span>fit<span class="sc">$</span>residuals)</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<pre><code>##  [1]  0.01  0.05  0.06  0.01 -0.07 -0.01 -0.05  0.02 -0.01 -0.03 -0.02  0.03
## [13] -0.03 -0.10 -0.04 -0.07 -0.01  0.04 -0.09 -0.08  0.00 -0.05 -0.10  0.04
## [25]  0.03  0.12  0.04</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf1</span>(vynosy<span class="fl">.00</span><span class="sc">$</span>fit<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-11-2.png" width="672" /></p>
<pre><code>##  [1]  0.08  0.04  0.32  0.07 -0.05  0.06  0.04 -0.05 -0.08 -0.05 -0.03 -0.03
## [13]  0.01 -0.04 -0.05  0.02 -0.06  0.00  0.15  0.05  0.00  0.10 -0.04  0.02
## [25]  0.03  0.03 -0.03</code></pre>
<p>Vidíme, že hoci samotné rezídua nevyzerajú byť korelované, ich druhé
mocniny sú. Takúto vlastnosť ale biely šum nemá. Preto budeme dáta
modelovať ako GARCH(p,q).</p>
<div id="archp" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> ARCH(p)</h2>
<p>Najskôr budeme dáta modelovať iba ako ARCH(p) proces. Začneme
základným ARCH(1) procesom. Použijeme funkciu <code>garchFit</code> z
knižnice <code>fGarch.</code>:</p>
<ul>
<li><code>~garch(1,0)</code> - predstavuje formulu, všeobecne v tvare
<code>~arma(p,q)+garch(p,q)</code></li>
<li><code>data</code> - naše dáta</li>
<li><code>trace</code> - ak chceme vypísať konvergenciu, atď… (FALSE ak
nechceme)</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.10</span> <span class="ot">&lt;-</span> <span class="fu">garchFit</span>(<span class="sc">~</span><span class="fu">garch</span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="at">data =</span> vynosy, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Warning: Using formula(x) is deprecated when x is a character vector of length &gt; 1.
##   Consider formula(paste(x, collapse = &quot; &quot;)) instead.</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.10</span></span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~garch(1, 0), data = vynosy, trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ garch(1, 0)
## &lt;environment: 0x000000001044b8d0&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##         mu       omega      alpha1  
## 0.01228099  0.00070833  0.82412747  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##         Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     0.0122810   0.0016873    7.279 3.37e-13 ***
## omega  0.0007083   0.0001052    6.731 1.68e-11 ***
## alpha1 0.8241275   0.1836433    4.488 7.20e-06 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  490.2423    normalized:  1.885547 
## 
## Description:
##  Tue Dec 13 16:10:58 2022 by user: alexb</code></pre>
<p>Z výstupu môžeme vidieť odhady pre jednotlivé parametre:</p>
<ul>
<li><code>mu</code> - konštanta v rovnici pre strednú hodnotu</li>
<li><code>omega</code> - konštanta v rovnici pre disperziu</li>
<li><code>alpha1</code> - koeficient pri <span
class="math inline">\(u_{t-1}^2\)</span></li>
</ul>
<p>Spolu s odhadmi sú dané aj štandardné odchýlky a hodnota testovej
štatistiky (H0 daný koeficient je nulový) spolu s p-value.</p>
<p>Všetky tri koeficienty sú signifikantné.</p>
<p>Pozrieme sa ešte na zhodnotenie rezíduí. Dobrý model bude taký, kde
nezostane žiadna autokorelácia v rezíduách ani v ich druhým mocninách, a
zároveň Hypotéza o homoskedasticite sa nebude zamietať. K týmto hodnotám
pristúpime cez funckiu <code>summary</code>, ktorá nám ponúka aj hodnotu
Informačných kritérií pre daný model. K tým budeme ale pristupovať
neskôr.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vynosy<span class="fl">.10</span>)</span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~garch(1, 0), data = vynosy, trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ garch(1, 0)
## &lt;environment: 0x000000001044b8d0&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##         mu       omega      alpha1  
## 0.01228099  0.00070833  0.82412747  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##         Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     0.0122810   0.0016873    7.279 3.37e-13 ***
## omega  0.0007083   0.0001052    6.731 1.68e-11 ***
## alpha1 0.8241275   0.1836433    4.488 7.20e-06 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  490.2423    normalized:  1.885547 
## 
## Description:
##  Tue Dec 13 16:10:58 2022 by user: alexb 
## 
## 
## Standardised Residuals Tests:
##                                 Statistic p-Value    
##  Jarque-Bera Test   R    Chi^2  11.77686  0.002771321
##  Shapiro-Wilk Test  R    W      0.9830935 0.003547433
##  Ljung-Box Test     R    Q(10)  6.683436  0.7549542  
##  Ljung-Box Test     R    Q(15)  13.94921  0.5293843  
##  Ljung-Box Test     R    Q(20)  17.52504  0.6186642  
##  Ljung-Box Test     R^2  Q(10)  19.67766  0.03245324 
##  Ljung-Box Test     R^2  Q(15)  21.8193   0.1126304  
##  Ljung-Box Test     R^2  Q(20)  30.21363  0.06646523 
##  LM Arch Test       R    TR^2   23.89044  0.0210502  
## 
## Information Criterion Statistics:
##       AIC       BIC       SIC      HQIC 
## -3.748018 -3.706933 -3.748280 -3.731501</code></pre>
<p>Vidíme, že stále ostáva istá autokorelácia medzi druhými mocninami
rezíduí, aj keď samotné rezíduá nie sú korelované. Rovnako sa zamieta aj
LM Arch test, teda zamietame hypotézu o homoskedasticite (konštantnosti
disperzie v rezíduach).</p>
<p>Skúsime teda zvýšiť rád ARCH procesu. ARCH(2):</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.20</span> <span class="ot">&lt;-</span> <span class="fu">garchFit</span>(<span class="sc">~</span><span class="fu">garch</span>(<span class="dv">2</span>,<span class="dv">0</span>), <span class="at">data =</span> vynosy, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Warning: Using formula(x) is deprecated when x is a character vector of length &gt; 1.
##   Consider formula(paste(x, collapse = &quot; &quot;)) instead.</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.20</span></span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~garch(2, 0), data = vynosy, trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ garch(2, 0)
## &lt;environment: 0x000000003e750ef8&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##         mu       omega      alpha1      alpha2  
## 0.01250834  0.00062618  0.73951560  0.10119458  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##         Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     0.0125083   0.0017459    7.164 7.81e-13 ***
## omega  0.0006262   0.0001059    5.911 3.41e-09 ***
## alpha1 0.7395156   0.1711366    4.321 1.55e-05 ***
## alpha2 0.1011946   0.0733648    1.379    0.168    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  491.8493    normalized:  1.891728 
## 
## Description:
##  Tue Dec 13 16:10:58 2022 by user: alexb</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vynosy<span class="fl">.20</span>)</span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~garch(2, 0), data = vynosy, trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ garch(2, 0)
## &lt;environment: 0x000000003e750ef8&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##         mu       omega      alpha1      alpha2  
## 0.01250834  0.00062618  0.73951560  0.10119458  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##         Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     0.0125083   0.0017459    7.164 7.81e-13 ***
## omega  0.0006262   0.0001059    5.911 3.41e-09 ***
## alpha1 0.7395156   0.1711366    4.321 1.55e-05 ***
## alpha2 0.1011946   0.0733648    1.379    0.168    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  491.8493    normalized:  1.891728 
## 
## Description:
##  Tue Dec 13 16:10:58 2022 by user: alexb 
## 
## 
## Standardised Residuals Tests:
##                                 Statistic p-Value    
##  Jarque-Bera Test   R    Chi^2  13.74896  0.001033834
##  Shapiro-Wilk Test  R    W      0.9823755 0.002640981
##  Ljung-Box Test     R    Q(10)  6.664339  0.7567077  
##  Ljung-Box Test     R    Q(15)  14.25221  0.5064933  
##  Ljung-Box Test     R    Q(20)  18.15392  0.5772696  
##  Ljung-Box Test     R^2  Q(10)  21.72101  0.01659071 
##  Ljung-Box Test     R^2  Q(15)  24.31925  0.05986656 
##  Ljung-Box Test     R^2  Q(20)  32.68251  0.03654703 
##  LM Arch Test       R    TR^2   23.37482  0.02470726 
## 
## Information Criterion Statistics:
##       AIC       BIC       SIC      HQIC 
## -3.752687 -3.697908 -3.753151 -3.730665</code></pre>
<p>Vidíme, že koeficient <code>alpha2</code> vyšiel nesignifikantný,
zároveň sa však zachovali nedostatky rezíduí z ARCH(1) procesu (v
niektorých prípadoch dokonca horšie p hodnoty).</p>
<p>ARCH(3)</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.30</span> <span class="ot">&lt;-</span> <span class="fu">garchFit</span>(<span class="sc">~</span><span class="fu">garch</span>(<span class="dv">3</span>,<span class="dv">0</span>), <span class="at">data =</span> vynosy, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Warning: Using formula(x) is deprecated when x is a character vector of length &gt; 1.
##   Consider formula(paste(x, collapse = &quot; &quot;)) instead.</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.30</span></span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~garch(3, 0), data = vynosy, trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ garch(3, 0)
## &lt;environment: 0x0000000038af1350&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##         mu       omega      alpha1      alpha2      alpha3  
## 0.01195434  0.00063827  0.57832711  0.07510174  0.07718334  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##         Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     0.0119543   0.0018873    6.334 2.39e-10 ***
## omega  0.0006383   0.0001131    5.643 1.68e-08 ***
## alpha1 0.5783271   0.1733182    3.337 0.000848 ***
## alpha2 0.0751017   0.0653501    1.149 0.250465    
## alpha3 0.0771833   0.0560063    1.378 0.168167    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  493.7705    normalized:  1.899117 
## 
## Description:
##  Tue Dec 13 16:10:58 2022 by user: alexb</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vynosy<span class="fl">.30</span>)</span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~garch(3, 0), data = vynosy, trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ garch(3, 0)
## &lt;environment: 0x0000000038af1350&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##         mu       omega      alpha1      alpha2      alpha3  
## 0.01195434  0.00063827  0.57832711  0.07510174  0.07718334  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##         Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     0.0119543   0.0018873    6.334 2.39e-10 ***
## omega  0.0006383   0.0001131    5.643 1.68e-08 ***
## alpha1 0.5783271   0.1733182    3.337 0.000848 ***
## alpha2 0.0751017   0.0653501    1.149 0.250465    
## alpha3 0.0771833   0.0560063    1.378 0.168167    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  493.7705    normalized:  1.899117 
## 
## Description:
##  Tue Dec 13 16:10:58 2022 by user: alexb 
## 
## 
## Standardised Residuals Tests:
##                                 Statistic p-Value    
##  Jarque-Bera Test   R    Chi^2  10.59042  0.005015564
##  Shapiro-Wilk Test  R    W      0.9834919 0.004185014
##  Ljung-Box Test     R    Q(10)  6.596019  0.762953   
##  Ljung-Box Test     R    Q(15)  14.54147  0.4849217  
##  Ljung-Box Test     R    Q(20)  18.83114  0.532825   
##  Ljung-Box Test     R^2  Q(10)  11.98889  0.2858005  
##  Ljung-Box Test     R^2  Q(15)  15.82681  0.3936542  
##  Ljung-Box Test     R^2  Q(20)  26.06814  0.1635732  
##  LM Arch Test       R    TR^2   13.958    0.3033985  
## 
## Information Criterion Statistics:
##       AIC       BIC       SIC      HQIC 
## -3.759773 -3.691298 -3.760494 -3.732245</code></pre>
<p>Opäť máme nesignifikantné koeficienty, no druhé mocniny rezíduí sú už
bez výraznej autokorelácie, LM Arch test sa nezamietol, teda môžeme
predpokladať konštatnú disperziu v rezíduách. Teda rezíduá môžeme
považovať za biely šum.</p>
</div>
<div id="garchpq" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> GARCH(p,q)</h2>
<p>ARCH(3) proces vyšiel ako vhodný model pre naše dáta, avšak vyšli nám
v ňom dva koeficienty nesignifikantné. Preto sa pozrieme aj na
zovšeobecnený ARCH proces, GARCH. Skúsime začať základným, ktorý sa vo
veľa prípadoch ukazuje ako dostatočný na modelovanie volatility,
GARCH(1,1)</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.11</span> <span class="ot">&lt;-</span> <span class="fu">garchFit</span>(<span class="sc">~</span><span class="fu">garch</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="at">data =</span> vynosy, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Warning: Using formula(x) is deprecated when x is a character vector of length &gt; 1.
##   Consider formula(paste(x, collapse = &quot; &quot;)) instead.</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.11</span></span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~garch(1, 1), data = vynosy, trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ garch(1, 1)
## &lt;environment: 0x0000000012561510&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##         mu       omega      alpha1       beta1  
## 0.01213424  0.00042425  0.56798059  0.28020573  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##         Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     0.0121342   0.0018511    6.555 5.55e-11 ***
## omega  0.0004242   0.0001278    3.321 0.000897 ***
## alpha1 0.5679806   0.1819404    3.122 0.001798 ** 
## beta1  0.2802057   0.1435779    1.952 0.050986 .  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  493.2928    normalized:  1.89728 
## 
## Description:
##  Tue Dec 13 16:10:58 2022 by user: alexb</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vynosy<span class="fl">.11</span>)</span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~garch(1, 1), data = vynosy, trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ garch(1, 1)
## &lt;environment: 0x0000000012561510&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##         mu       omega      alpha1       beta1  
## 0.01213424  0.00042425  0.56798059  0.28020573  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##         Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     0.0121342   0.0018511    6.555 5.55e-11 ***
## omega  0.0004242   0.0001278    3.321 0.000897 ***
## alpha1 0.5679806   0.1819404    3.122 0.001798 ** 
## beta1  0.2802057   0.1435779    1.952 0.050986 .  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  493.2928    normalized:  1.89728 
## 
## Description:
##  Tue Dec 13 16:10:58 2022 by user: alexb 
## 
## 
## Standardised Residuals Tests:
##                                 Statistic p-Value    
##  Jarque-Bera Test   R    Chi^2  13.29979  0.001294155
##  Shapiro-Wilk Test  R    W      0.9827872 0.003126395
##  Ljung-Box Test     R    Q(10)  6.639305  0.7590012  
##  Ljung-Box Test     R    Q(15)  14.93204  0.4563236  
##  Ljung-Box Test     R    Q(20)  19.581    0.4843993  
##  Ljung-Box Test     R^2  Q(10)  15.76623  0.1065227  
##  Ljung-Box Test     R^2  Q(15)  20.1228   0.1672724  
##  Ljung-Box Test     R^2  Q(20)  29.89771  0.07152814 
##  LM Arch Test       R    TR^2   17.71938  0.1244807  
## 
## Information Criterion Statistics:
##       AIC       BIC       SIC      HQIC 
## -3.763791 -3.709011 -3.764255 -3.741769</code></pre>
<p>Všetky koeficienty vyšli signifikatné, aj keď koeficient
<code>beta1</code> (koeficient pri <span
class="math inline">\(\sigma_{t-1}^2\)</span>) vyšiel dosť nahrane. Čo
však je možné pozorovať je, že testy nám nezamietli ani nulovú koreláciu
medzi rezíduami, ani pre ich druhé mocniny, ani LM Arch test pre
homoskedasticitu v rezíduách. Teda, tak ako ARCH(3), aj GARCH(1,1) je
pre naše dáta dobrým modelom.</p>
<p>Na ukážku ešte vyskúšame GARCH proces vyššieho rádu napríklad
GARCH(1,2), teda jeden krát člen <span
class="math inline">\(u_{t-1}^2\)</span> a dva krát predošle hodnoty
<span class="math inline">\(\sigma^2\)</span>.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.12</span> <span class="ot">&lt;-</span> <span class="fu">garchFit</span>(<span class="sc">~</span><span class="fu">garch</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">data =</span> vynosy, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Warning: Using formula(x) is deprecated when x is a character vector of length &gt; 1.
##   Consider formula(paste(x, collapse = &quot; &quot;)) instead.</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.12</span></span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~garch(1, 2), data = vynosy, trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ garch(1, 2)
## &lt;environment: 0x000000003ff80600&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##         mu       omega      alpha1       beta1       beta2  
## 0.01180016  0.00041398  0.55035142  0.14081907  0.14095778  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##         Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     0.0118002   0.0018603    6.343 2.25e-10 ***
## omega  0.0004140   0.0001282    3.229 0.001241 ** 
## alpha1 0.5503514   0.1526750    3.605 0.000312 ***
## beta1  0.1408191   0.1113734    1.264 0.206091    
## beta2  0.1409578   0.1094362    1.288 0.197734    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  494.3287    normalized:  1.901264 
## 
## Description:
##  Tue Dec 13 16:10:59 2022 by user: alexb</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vynosy<span class="fl">.12</span>)</span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~garch(1, 2), data = vynosy, trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ garch(1, 2)
## &lt;environment: 0x000000003ff80600&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##         mu       omega      alpha1       beta1       beta2  
## 0.01180016  0.00041398  0.55035142  0.14081907  0.14095778  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##         Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     0.0118002   0.0018603    6.343 2.25e-10 ***
## omega  0.0004140   0.0001282    3.229 0.001241 ** 
## alpha1 0.5503514   0.1526750    3.605 0.000312 ***
## beta1  0.1408191   0.1113734    1.264 0.206091    
## beta2  0.1409578   0.1094362    1.288 0.197734    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  494.3287    normalized:  1.901264 
## 
## Description:
##  Tue Dec 13 16:10:59 2022 by user: alexb 
## 
## 
## Standardised Residuals Tests:
##                                 Statistic p-Value    
##  Jarque-Bera Test   R    Chi^2  10.72817  0.004681753
##  Shapiro-Wilk Test  R    W      0.9836592 0.004487271
##  Ljung-Box Test     R    Q(10)  6.817906  0.7425167  
##  Ljung-Box Test     R    Q(15)  14.68938  0.4740142  
##  Ljung-Box Test     R    Q(20)  19.19325  0.5092982  
##  Ljung-Box Test     R^2  Q(10)  11.40521  0.3268318  
##  Ljung-Box Test     R^2  Q(15)  16.29616  0.3626467  
##  Ljung-Box Test     R^2  Q(20)  26.5725   0.1477254  
##  LM Arch Test       R    TR^2   13.27446  0.3494116  
## 
## Information Criterion Statistics:
##       AIC       BIC       SIC      HQIC 
## -3.764067 -3.695592 -3.764788 -3.736539</code></pre>
<p>Vhodný model pre naše dáta môžeme zvoliť napríklad podľa informačných
kritérií, ku ktorým vieme pristúpiť nasledovne.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.30</span><span class="sc">@</span>fit<span class="sc">$</span>ics <span class="co"># ARCH(3)</span></span></code></pre></div>
<pre><code>##       AIC       BIC       SIC      HQIC 
## -3.759773 -3.691298 -3.760494 -3.732245</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.11</span><span class="sc">@</span>fit<span class="sc">$</span>ics <span class="co"># GARCH(1,1)</span></span></code></pre></div>
<pre><code>##       AIC       BIC       SIC      HQIC 
## -3.763791 -3.709011 -3.764255 -3.741769</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.12</span><span class="sc">@</span>fit<span class="sc">$</span>ics <span class="co"># GARCH(1,2)</span></span></code></pre></div>
<pre><code>##       AIC       BIC       SIC      HQIC 
## -3.764067 -3.695592 -3.764788 -3.736539</code></pre>
<p>Vidíme, že spomedzi troch modelov, ktoré boli pre naše dáta
vyhovujúce, má najmenšie hodnoty informačných kritérií práve GARCH(1,1).
Ten ďalej použijeme aj na predikcie z modelu.</p>
</div>
<div id="predikcie" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Predikcie</h2>
<p>Podobne ako pri Holt-Wintersovej metóde, predikcie budeme robiť
pomocou funkcie <code>predict</code></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>vynosy.pred11 <span class="ot">&lt;-</span> <span class="fu">predict</span>(vynosy<span class="fl">.11</span>, <span class="at">n.ahead =</span> <span class="dv">50</span>, <span class="at">plot =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>Keďže dáta modelujeme ako konštantu plus biely šum, predikcie do
budúcnosti bude tiež iba samotná konštanta. Na druhú stranu, môžeme
vidieť, že podmienená postupne narastá a konverguje k nepodmienenej
disperzií časového radu. Prejaví sa to tak, že sa nám postupne rozšírujú
intervaly spoľahlivosti.</p>
</div>
</div>
<div id="data-2---výmenné-kurzy-plneur" class="section level1"
number="3">
<h1><span class="header-section-number">3</span> Data 2 - výmenné kurzy
PLN/EUR</h1>
<p>Načítanie a úprava dáta na logaritmické výnosy. Dáta sú za obdobie 3
rokov, voľne dostupné na <a
href="https://www.ecb.europa.eu/stats/policy_and_exchange_rates/euro_reference_exchange_rates/html/index.en.html"
class="uri">https://www.ecb.europa.eu/stats/policy_and_exchange_rates/euro_reference_exchange_rates/html/index.en.html</a></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;XRdata.Rdata&quot;</span>)</span></code></pre></div>
<p>Finálne dáta budú predstavovať stĺpec 7:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>vynosy <span class="ot">&lt;-</span> <span class="fu">as.ts</span>(data[,<span class="dv">7</span>])</span></code></pre></div>
<p>Vykreslíme si dáta a skontrolujeme, či sa v nich nenachádza
jednotkový koreň</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(vynosy)<span class="sc">+</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;green&quot;</span>)<span class="sc">+</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">mean</span>(vynosy), <span class="at">color =</span> <span class="st">&quot;orange&quot;</span>)</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>Obe čiary sú blízko pri sebe, teda použijeme
<code>type = "none"</code>:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">ur.df</span>(vynosy, <span class="at">lags =</span> <span class="dv">5</span>, <span class="at">selectlags =</span> <span class="st">&quot;BIC&quot;</span>, <span class="at">type =</span> <span class="st">&quot;none&quot;</span>))</span></code></pre></div>
<pre><code>## 
## ############################################### 
## # Augmented Dickey-Fuller Test Unit Root Test # 
## ############################################### 
## 
## Test regression none 
## 
## 
## Call:
## lm(formula = z.diff ~ z.lag.1 - 1 + z.diff.lag)
## 
## Residuals:
##        Min         1Q     Median         3Q        Max 
## -0.0125745 -0.0013625  0.0000469  0.0014912  0.0146443 
## 
## Coefficients:
##            Estimate Std. Error t value Pr(&gt;|t|)    
## z.lag.1    -0.84495    0.05028 -16.805  &lt; 2e-16 ***
## z.diff.lag -0.13157    0.03607  -3.648 0.000283 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.002927 on 758 degrees of freedom
## Multiple R-squared:  0.4954, Adjusted R-squared:  0.494 
## F-statistic:   372 on 2 and 758 DF,  p-value: &lt; 2.2e-16
## 
## 
## Value of test-statistic is: -16.8045 
## 
## Critical values for test statistics: 
##       1pct  5pct 10pct
## tau1 -2.58 -1.95 -1.62</code></pre>
<p>Test zamieta hypotézu o jednotkovom koreni, teda dáta nebude treba
diferencovať.</p>
<p>Ako už z obrázku vidieť, dáta pozostávajú z období väčšej a menšej
volatility.</p>
<p>Pozrieme sa najskôr na ACF a PACF pre naše dáta</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf2</span>(vynosy)</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<pre><code>##      [,1] [,2] [,3]  [,4] [,5]  [,6] [,7]  [,8] [,9] [,10] [,11] [,12] [,13]
## ACF  0.03 0.13 0.07  0.01 0.10 -0.07 0.03 -0.13 0.01 -0.06 -0.02 -0.01 -0.04
## PACF 0.03 0.13 0.06 -0.01 0.09 -0.08 0.01 -0.12 0.03 -0.04  0.00 -0.01 -0.01
##      [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25]
## ACF  -0.03  0.04 -0.01  0.01  0.01 -0.02  0.02 -0.01 -0.01  0.00     0  0.04
## PACF -0.05  0.06 -0.02  0.01  0.00 -0.02  0.00  0.00 -0.02  0.01     0  0.05
##      [,26] [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37]
## ACF  -0.07  0.03 -0.05 -0.01 -0.04 -0.02  0.01 -0.10  0.08 -0.05  0.06  0.01
## PACF -0.07  0.03 -0.05  0.00 -0.05  0.02  0.00 -0.07  0.07 -0.01  0.03  0.01
##      [,38]
## ACF   0.05
## PACF  0.05</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sarima</span>(vynosy, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## initial  value -5.828968 
## iter   1 value -5.828968
## final  value -5.828968 
## converged
## initial  value -5.828968 
## iter   1 value -5.828968
## final  value -5.828968 
## converged</code></pre>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-24-2.png" width="672" /></p>
<pre><code>## $fit
## 
## Call:
## arima(x = xdata, order = c(p, d, q), seasonal = list(order = c(P, D, Q), period = S), 
##     xreg = xmean, include.mean = FALSE, transform.pars = trans, fixed = fixed, 
##     optim.control = list(trace = trc, REPORT = 1, reltol = tol))
## 
## Coefficients:
##       xmean
##       1e-04
## s.e.  1e-04
## 
## sigma^2 estimated as 8.65e-06:  log likelihood = 3378.08,  aic = -6752.17
## 
## $degrees_of_freedom
## [1] 765
## 
## $ttable
##       Estimate    SE t.value p.value
## xmean    1e-04 1e-04  1.0578  0.2905
## 
## $AIC
## [1] -8.814838
## 
## $AICc
## [1] -8.814831
## 
## $BIC
## [1] -8.80272</code></pre>
<p>V tomto prípade sa samotný časový rad nedá považovať za biely šum
posunutý o konštantu. Vidíme v ACF aj PACF autokorelácie mimo intervalov
spolahlivosti. Rovnako nevychádzajú ani Ljung-Boxové testy.</p>
<div id="arma" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> ARMA</h2>
<p>Poďme ako prvé skúsiť nájsť obyčajný ARMA model pre naše dáta. Podľa
ACF a PACF by sa mohlo zdať, že dobrý model by mohol byť AR(2), MA(3),
MA(4) alebo nejaký zmiešaný model</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>vynosy.ar2 <span class="ot">&lt;-</span> <span class="fu">capture.output</span>(<span class="fu">sarima</span>(vynosy, <span class="dv">2</span>, <span class="dv">0</span> ,<span class="dv">0</span>))</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>vynosy.ar3 <span class="ot">&lt;-</span> <span class="fu">capture.output</span>(<span class="fu">sarima</span>(vynosy, <span class="dv">3</span>, <span class="dv">0</span> ,<span class="dv">0</span>))</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-25-2.png" width="672" /></p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>vynosy.ma2 <span class="ot">&lt;-</span> <span class="fu">capture.output</span>(<span class="fu">sarima</span>(vynosy, <span class="dv">0</span>, <span class="dv">0</span> ,<span class="dv">2</span>))</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-25-3.png" width="672" /></p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>vynosy.ma3 <span class="ot">&lt;-</span> <span class="fu">capture.output</span>(<span class="fu">sarima</span>(vynosy, <span class="dv">0</span>, <span class="dv">0</span> ,<span class="dv">3</span>))</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-25-4.png" width="672" /></p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.31</span> <span class="ot">&lt;-</span> <span class="fu">capture.output</span>(<span class="fu">sarima</span>(vynosy, <span class="dv">3</span>, <span class="dv">0</span> ,<span class="dv">1</span>))</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-25-5.png" width="672" /></p>
<p>Vidíme, že jediný vyhovujúci z tých, ktoré sme vyskúšali je
ARMA(3,1). Poďme sa pozrieť, ako sú natom rezíduá a ich druhé
mocniny.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>vynosy<span class="fl">.31</span> <span class="ot">&lt;-</span> <span class="fu">sarima</span>(vynosy, <span class="dv">3</span>, <span class="dv">0</span> ,<span class="dv">1</span>,<span class="at">details =</span> <span class="cn">FALSE</span>)</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">acf1</span>(vynosy<span class="fl">.31</span><span class="sc">$</span>fit<span class="sc">$</span>residuals)</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<pre><code>##  [1]  0.00 -0.01 -0.01  0.05  0.04 -0.01 -0.03 -0.08 -0.01 -0.02 -0.03  0.01
## [13] -0.05 -0.02  0.04  0.00  0.00  0.01 -0.02  0.02 -0.01 -0.01 -0.01  0.02
## [25]  0.03 -0.05  0.02 -0.03 -0.02 -0.03 -0.01  0.01 -0.09  0.07 -0.03  0.04
## [37]  0.01  0.04</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf1</span>(vynosy<span class="fl">.31</span><span class="sc">$</span>fit<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-26-2.png" width="672" /></p>
<pre><code>##  [1]  0.23  0.26  0.18  0.24  0.17  0.09  0.14  0.06  0.09  0.04  0.02  0.00
## [13]  0.08  0.07  0.07  0.00  0.00  0.00  0.02 -0.01  0.01  0.04  0.02  0.03
## [25] -0.01  0.02  0.11  0.07  0.08  0.04  0.05  0.09  0.06  0.07  0.05  0.01
## [37]  0.01  0.01</code></pre>
<p>Vidíme, že zatiaľ, čo autokorelačná funkcia pre rezíduá pripomína tú
pre biely šum, druhé mocniny rezíduí sú evidentne korelované, a teda o
biely šum nejde. Bohužial pre prípad, keď sa nejedná o čisto GARCH
model, nie je dobré najskôr samostantne určiť rád členov ARMA procesu a
potom dourčiť rád GARCH procesu (ak nejde o čisto AR proces), to z
dôvodu, že tieto dve rovnice sú navzájom prepojené, keďže v oboch by
vystupovali nejaké rovnaké predošlé hodnoty <span
class="math inline">\(u_{t-s}\)</span>.</p>
</div>
<div id="garch" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> GARCH</h2>
<p>Vyskúšame najskôr čisto GARCH(1,1)</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>vynosy.<span class="fl">00.11</span> <span class="ot">&lt;-</span> <span class="fu">garchFit</span>(<span class="sc">~</span> <span class="fu">garch</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="at">data =</span> vynosy, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Warning: Using formula(x) is deprecated when x is a character vector of length &gt; 1.
##   Consider formula(paste(x, collapse = &quot; &quot;)) instead.</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>vynosy.<span class="fl">00.11</span> </span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~garch(1, 1), data = vynosy, trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ garch(1, 1)
## &lt;environment: 0x000000003a249ad0&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##          mu        omega       alpha1        beta1  
## -4.6216e-05   1.1492e-07   1.4261e-01   8.5890e-01  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##          Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     -4.622e-05   7.720e-05   -0.599   0.5494    
## omega   1.149e-07   6.657e-08    1.726   0.0843 .  
## alpha1  1.426e-01   3.011e-02    4.737 2.17e-06 ***
## beta1   8.589e-01   2.790e-02   30.781  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  3480.906    normalized:  4.544264 
## 
## Description:
##  Tue Dec 13 16:11:02 2022 by user: alexb</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vynosy.<span class="fl">00.11</span>)</span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~garch(1, 1), data = vynosy, trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ garch(1, 1)
## &lt;environment: 0x000000003a249ad0&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##          mu        omega       alpha1        beta1  
## -4.6216e-05   1.1492e-07   1.4261e-01   8.5890e-01  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##          Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     -4.622e-05   7.720e-05   -0.599   0.5494    
## omega   1.149e-07   6.657e-08    1.726   0.0843 .  
## alpha1  1.426e-01   3.011e-02    4.737 2.17e-06 ***
## beta1   8.589e-01   2.790e-02   30.781  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  3480.906    normalized:  4.544264 
## 
## Description:
##  Tue Dec 13 16:11:02 2022 by user: alexb 
## 
## 
## Standardised Residuals Tests:
##                                 Statistic p-Value     
##  Jarque-Bera Test   R    Chi^2  64.28584  1.099121e-14
##  Shapiro-Wilk Test  R    W      0.9845687 3.197461e-07
##  Ljung-Box Test     R    Q(10)  24.87566  0.005586247 
##  Ljung-Box Test     R    Q(15)  28.31329  0.01968821  
##  Ljung-Box Test     R    Q(20)  28.80434  0.09168411  
##  Ljung-Box Test     R^2  Q(10)  5.188251  0.878253    
##  Ljung-Box Test     R^2  Q(15)  14.489    0.4888117   
##  Ljung-Box Test     R^2  Q(20)  21.46727  0.3701027   
##  LM Arch Test       R    TR^2   8.646067  0.7328267   
## 
## Information Criterion Statistics:
##       AIC       BIC       SIC      HQIC 
## -9.078084 -9.053848 -9.078138 -9.068755</code></pre>
<p>Vidíme, že testy pre druhé mocniny rezíduí ako aj LM Arch test vyšli
dobre. Parametre GARCH procesu vyšli signifikatné (až na konštantu z
rovnice pre strednú hodnotu). Čo však nevyšlo dobre, sú Ljung-Boxové
testy o nezávislosti rezíduí.</p>
<p>Skúsime preto použiť zmiešany ARMA+GARCH proces. Zoberme opäť
GARCH(1,1) a AR(1)</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>vynosy.<span class="fl">10.11</span> <span class="ot">&lt;-</span> <span class="fu">garchFit</span>(<span class="sc">~</span> <span class="fu">arma</span>(<span class="dv">1</span>,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">garch</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="at">data =</span> vynosy, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Warning: Using formula(x) is deprecated when x is a character vector of length &gt; 1.
##   Consider formula(paste(x, collapse = &quot; &quot;)) instead.</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>vynosy.<span class="fl">10.11</span> </span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~arma(1, 0) + garch(1, 1), data = vynosy, 
##     trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ arma(1, 0) + garch(1, 1)
## &lt;environment: 0x0000000037488008&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##          mu          ar1        omega       alpha1        beta1  
## -4.5518e-05   4.3555e-02   1.1370e-07   1.4286e-01   8.5887e-01  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##          Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     -4.552e-05   7.669e-05   -0.594   0.5528    
## ar1     4.356e-02   3.968e-02    1.098   0.2723    
## omega   1.137e-07   6.540e-08    1.739   0.0821 .  
## alpha1  1.429e-01   3.006e-02    4.752 2.01e-06 ***
## beta1   8.589e-01   2.764e-02   31.074  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  3481.532    normalized:  4.545081 
## 
## Description:
##  Tue Dec 13 16:11:02 2022 by user: alexb</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vynosy.<span class="fl">10.11</span>)</span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~arma(1, 0) + garch(1, 1), data = vynosy, 
##     trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ arma(1, 0) + garch(1, 1)
## &lt;environment: 0x0000000037488008&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##          mu          ar1        omega       alpha1        beta1  
## -4.5518e-05   4.3555e-02   1.1370e-07   1.4286e-01   8.5887e-01  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##          Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     -4.552e-05   7.669e-05   -0.594   0.5528    
## ar1     4.356e-02   3.968e-02    1.098   0.2723    
## omega   1.137e-07   6.540e-08    1.739   0.0821 .  
## alpha1  1.429e-01   3.006e-02    4.752 2.01e-06 ***
## beta1   8.589e-01   2.764e-02   31.074  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  3481.532    normalized:  4.545081 
## 
## Description:
##  Tue Dec 13 16:11:02 2022 by user: alexb 
## 
## 
## Standardised Residuals Tests:
##                                 Statistic p-Value     
##  Jarque-Bera Test   R    Chi^2  65.35194  6.439294e-15
##  Shapiro-Wilk Test  R    W      0.9844323 2.859743e-07
##  Ljung-Box Test     R    Q(10)  20.70546  0.02324363  
##  Ljung-Box Test     R    Q(15)  24.04184  0.06438638  
##  Ljung-Box Test     R    Q(20)  24.62289  0.216241    
##  Ljung-Box Test     R^2  Q(10)  5.697065  0.84004     
##  Ljung-Box Test     R^2  Q(15)  15.54904  0.4126382   
##  Ljung-Box Test     R^2  Q(20)  22.43413  0.3174258   
##  LM Arch Test       R    TR^2   9.470159  0.6623341   
## 
## Information Criterion Statistics:
##       AIC       BIC       SIC      HQIC 
## -9.077107 -9.046812 -9.077192 -9.065445</code></pre>
<p>AR člen vyšiel nesignifikatný, testy o nekorelovanosti rezíduí boli
opäť zamietnuté. Skúsme vyšší AR rad. AR(2)</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>vynosy.<span class="fl">20.11</span> <span class="ot">&lt;-</span> <span class="fu">garchFit</span>(<span class="sc">~</span> <span class="fu">arma</span>(<span class="dv">2</span>,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">garch</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="at">data =</span> vynosy, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Warning: Using formula(x) is deprecated when x is a character vector of length &gt; 1.
##   Consider formula(paste(x, collapse = &quot; &quot;)) instead.</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>vynosy.<span class="fl">20.11</span> </span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~arma(2, 0) + garch(1, 1), data = vynosy, 
##     trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ arma(2, 0) + garch(1, 1)
## &lt;environment: 0x0000000036d64f90&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##          mu          ar1          ar2        omega       alpha1        beta1  
## -3.9522e-05   4.0675e-02   6.5698e-02   1.1759e-07   1.4285e-01   8.5830e-01  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##          Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     -3.952e-05   7.635e-05   -0.518   0.6047    
## ar1     4.068e-02   3.938e-02    1.033   0.3016    
## ar2     6.570e-02   3.912e-02    1.679   0.0931 .  
## omega   1.176e-07   6.719e-08    1.750   0.0801 .  
## alpha1  1.429e-01   3.048e-02    4.687 2.78e-06 ***
## beta1   8.583e-01   2.838e-02   30.244  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  3483.512    normalized:  4.547666 
## 
## Description:
##  Tue Dec 13 16:11:02 2022 by user: alexb</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vynosy.<span class="fl">20.11</span>)</span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~arma(2, 0) + garch(1, 1), data = vynosy, 
##     trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ arma(2, 0) + garch(1, 1)
## &lt;environment: 0x0000000036d64f90&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##          mu          ar1          ar2        omega       alpha1        beta1  
## -3.9522e-05   4.0675e-02   6.5698e-02   1.1759e-07   1.4285e-01   8.5830e-01  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##          Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     -3.952e-05   7.635e-05   -0.518   0.6047    
## ar1     4.068e-02   3.938e-02    1.033   0.3016    
## ar2     6.570e-02   3.912e-02    1.679   0.0931 .  
## omega   1.176e-07   6.719e-08    1.750   0.0801 .  
## alpha1  1.429e-01   3.048e-02    4.687 2.78e-06 ***
## beta1   8.583e-01   2.838e-02   30.244  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  3483.512    normalized:  4.547666 
## 
## Description:
##  Tue Dec 13 16:11:02 2022 by user: alexb 
## 
## 
## Standardised Residuals Tests:
##                                 Statistic p-Value     
##  Jarque-Bera Test   R    Chi^2  67.77328  1.887379e-15
##  Shapiro-Wilk Test  R    W      0.9841076 2.197408e-07
##  Ljung-Box Test     R    Q(10)  14.77084  0.1406426   
##  Ljung-Box Test     R    Q(15)  18.09816  0.2575403   
##  Ljung-Box Test     R    Q(20)  18.68947  0.5420855   
##  Ljung-Box Test     R^2  Q(10)  5.183387  0.8785956   
##  Ljung-Box Test     R^2  Q(15)  14.34345  0.4996564   
##  Ljung-Box Test     R^2  Q(20)  21.26992  0.3814011   
##  LM Arch Test       R    TR^2   9.422403  0.6664907   
## 
## Information Criterion Statistics:
##       AIC       BIC       SIC      HQIC 
## -9.079666 -9.043312 -9.079788 -9.065672</code></pre>
<p>V tomto prípade nám síce opäť vyšli nesignifikantné koeficienty,
avšak tento krát sa testy pre nekorelovanosť rezíduí nezamietli. Ak si
ich porovname s testami pre čisto s AR(2) proces, tak vidíme, že zatiaľ
čo samotný AR(2) proces bol nevyhovujúci ako model, AR(2)+GARCH(1,1) je
už vyhovujúcim modelom.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>vynosy.ar2 <span class="ot">&lt;-</span> <span class="fu">capture.output</span>(<span class="fu">sarima</span>(vynosy,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<p>Skúsme ešte porovnať AR(2)+GARCH(1,1) s ARMA(3,1)+GARCH(1,1) (keďže
ARMA(3,1) nám vyšiel ako možný kandidát na model pre dáta, zlyhal na
korelovanosti druhých mocnín rezíduí)</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>vynosy.<span class="fl">31.11</span> <span class="ot">&lt;-</span> <span class="fu">garchFit</span>(<span class="sc">~</span> <span class="fu">arma</span>(<span class="dv">3</span>,<span class="dv">1</span>)<span class="sc">+</span><span class="fu">garch</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="at">data =</span> vynosy, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Warning: Using formula(x) is deprecated when x is a character vector of length &gt; 1.
##   Consider formula(paste(x, collapse = &quot; &quot;)) instead.</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>vynosy.<span class="fl">31.11</span> </span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~arma(3, 1) + garch(1, 1), data = vynosy, 
##     trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ arma(3, 1) + garch(1, 1)
## &lt;environment: 0x00000000104b49c8&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##          mu          ar1          ar2          ar3          ma1        omega  
## -7.7938e-05  -8.9302e-01   1.0498e-01   9.3518e-02   9.3744e-01   1.2317e-07  
##      alpha1        beta1  
##  1.4243e-01   8.5752e-01  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##          Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     -7.794e-05   1.479e-04   -0.527   0.5982    
## ar1    -8.930e-01   6.214e-02  -14.370   &lt;2e-16 ***
## ar2     1.050e-01   5.191e-02    2.022   0.0431 *  
## ar3     9.352e-02   4.052e-02    2.308   0.0210 *  
## ma1     9.374e-01   5.101e-02   18.377   &lt;2e-16 ***
## omega   1.232e-07   7.032e-08    1.752   0.0798 .  
## alpha1  1.424e-01   3.049e-02    4.671    3e-06 ***
## beta1   8.575e-01   2.894e-02   29.633   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  3485.935    normalized:  4.550829 
## 
## Description:
##  Tue Dec 13 16:11:03 2022 by user: alexb</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vynosy.<span class="fl">31.11</span>)</span></code></pre></div>
<pre><code>## 
## Title:
##  GARCH Modelling 
## 
## Call:
##  garchFit(formula = ~arma(3, 1) + garch(1, 1), data = vynosy, 
##     trace = FALSE) 
## 
## Mean and Variance Equation:
##  data ~ arma(3, 1) + garch(1, 1)
## &lt;environment: 0x00000000104b49c8&gt;
##  [data = vynosy]
## 
## Conditional Distribution:
##  norm 
## 
## Coefficient(s):
##          mu          ar1          ar2          ar3          ma1        omega  
## -7.7938e-05  -8.9302e-01   1.0498e-01   9.3518e-02   9.3744e-01   1.2317e-07  
##      alpha1        beta1  
##  1.4243e-01   8.5752e-01  
## 
## Std. Errors:
##  based on Hessian 
## 
## Error Analysis:
##          Estimate  Std. Error  t value Pr(&gt;|t|)    
## mu     -7.794e-05   1.479e-04   -0.527   0.5982    
## ar1    -8.930e-01   6.214e-02  -14.370   &lt;2e-16 ***
## ar2     1.050e-01   5.191e-02    2.022   0.0431 *  
## ar3     9.352e-02   4.052e-02    2.308   0.0210 *  
## ma1     9.374e-01   5.101e-02   18.377   &lt;2e-16 ***
## omega   1.232e-07   7.032e-08    1.752   0.0798 .  
## alpha1  1.424e-01   3.049e-02    4.671    3e-06 ***
## beta1   8.575e-01   2.894e-02   29.633   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Log Likelihood:
##  3485.935    normalized:  4.550829 
## 
## Description:
##  Tue Dec 13 16:11:03 2022 by user: alexb 
## 
## 
## Standardised Residuals Tests:
##                                 Statistic p-Value     
##  Jarque-Bera Test   R    Chi^2  65.29231  6.661338e-15
##  Shapiro-Wilk Test  R    W      0.9843917 2.766816e-07
##  Ljung-Box Test     R    Q(10)  10.68404  0.382658    
##  Ljung-Box Test     R    Q(15)  13.22341  0.5850468   
##  Ljung-Box Test     R    Q(20)  14.16726  0.8219151   
##  Ljung-Box Test     R^2  Q(10)  4.959951  0.8938372   
##  Ljung-Box Test     R^2  Q(15)  13.69448  0.5488151   
##  Ljung-Box Test     R^2  Q(20)  21.51548  0.3673696   
##  LM Arch Test       R    TR^2   8.988421  0.7039191   
## 
## Information Criterion Statistics:
##       AIC       BIC       SIC      HQIC 
## -9.080771 -9.032299 -9.080986 -9.062112</code></pre>
<p>Môžeme porovnať ich informačné kritéria</p>
<div class="sourceCode" id="cb101"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>vynosy.<span class="fl">20.11</span><span class="sc">@</span>fit<span class="sc">$</span>ics <span class="co"># AR(2)+GARCH(1,1)</span></span></code></pre></div>
<pre><code>##       AIC       BIC       SIC      HQIC 
## -9.079666 -9.043312 -9.079788 -9.065672</code></pre>
<div class="sourceCode" id="cb103"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>vynosy.<span class="fl">31.11</span><span class="sc">@</span>fit<span class="sc">$</span>ics <span class="co"># ARMA(3,1)+GARCH(1,1)</span></span></code></pre></div>
<pre><code>##       AIC       BIC       SIC      HQIC 
## -9.080771 -9.032299 -9.080986 -9.062112</code></pre>
<p>Podľa informačných kritérií, pridanie ďaľších dvoch členov v ARMA
procese neprinieslo výrazne zlepšie v fittovaní dát (informačné kritéria
skoro rovnaké). Z tohto dôvodu je lepšie odhadovať rád ARMA časti a
GARCH časti dokopy.</p>
</div>
<div id="predikcie-1" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Predikcie</h2>
<p>Rovnako ako pri výnosoch akcií spravíme predikcie pre výnosy
výmenných kurzov 12 dní dopredu. Použijeme AR(2)+GARCH(1,1) proces.</p>
<div class="sourceCode" id="cb105"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>vynosy.pred.<span class="fl">20.11</span> <span class="ot">&lt;-</span> <span class="fu">predict</span>(vynosy.<span class="fl">20.11</span>, <span class="at">n.ahead =</span> <span class="dv">12</span>, <span class="at">plot =</span> <span class="cn">TRUE</span>, <span class="at">nx =</span> <span class="dv">70</span>)</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
</div>
</div>
<div id="výpočet-var" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Výpočet VaR</h1>
<p>Value at risk predstavuje mieru rizika, ktorá nám hovorí aké
najväčšie straty s pravdepodonosťou <span class="math inline">\(1 -
\alpha\)</span>, kde <span class="math inline">\(\alpha\)</span> je
nejaká hladina pravdepodobnosti,môžeme očakávať. Označme X hodnotu
portfólia. Potom <span class="math inline">\(VaR_{\alpha}\)</span> je
taká hodnota, pre ktorú platí, že <span class="math display">\[P(X \leq
VaR_{\alpha})=\alpha\]</span> Teda, <span
class="math inline">\(VaR_{\alpha}\)</span> predstavuje <span
class="math inline">\(1 - \alpha\)</span> kvantil rozdelenia možných
hodnôt X. Ak predpokladáme, normálne rozdelenie, tak to nie je nič iné
ako <span class="math inline">\(1 - \alpha\)</span> kvantil normálneho
rozdelenia.</p>
<div id="var-pre-apple-akciu" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> VaR pre Apple
akciu</h2>
<p>Data pre ceny akcie</p>
<div class="sourceCode" id="cb106"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>ceny <span class="ot">&lt;-</span> AAPL.tyzden<span class="sc">$</span>AAPL.Adjusted</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>vynosy <span class="ot">&lt;-</span> <span class="fu">diff</span>(<span class="fu">log</span>(ceny))</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>vynosy <span class="ot">&lt;-</span> vynosy[<span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<p>Model použijeme GARCH(1,1). Budeme počítať VaR iteračne. Každý deň
budeme fitovať GARCH(1,1) proces pre naše dáta a spravíme pridkciu
volatility na ďalší deň. Odhadovať budeme vždy z posledných 50
pozorovaní.</p>
<p>Zadefinujeme si prázdny VaR vektor:</p>
<div class="sourceCode" id="cb107"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>var.aaple <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, <span class="fu">length</span>(vynosy) <span class="sc">-</span> N <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(var.aaple))</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>  data.aapl <span class="ot">&lt;-</span> vynosy[i<span class="sc">:</span>(i<span class="sc">+</span>N<span class="dv">-1</span>)]</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>  garch.aapl <span class="ot">&lt;-</span> <span class="fu">garchFit</span>(<span class="sc">~</span><span class="fu">garch</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="at">data =</span> data.aapl, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>  aapl.pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(garch.aapl, <span class="at">n.ahead =</span> <span class="dv">1</span>, <span class="at">plot =</span> <span class="cn">FALSE</span>)</span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>  var.aaple[i] <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(<span class="fl">0.05</span>, <span class="at">mean =</span> aapl.pred[<span class="dv">1</span>,<span class="dv">1</span>],<span class="at">sd =</span> aapl.pred[<span class="dv">1</span>,<span class="dv">3</span>])</span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Vytvoríme z výsnosov aj VaR časové rady. VaR začína až od N+1
dňa.</p>
<div class="sourceCode" id="cb108"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>vynosy <span class="ot">&lt;-</span> <span class="fu">ts</span>(vynosy)</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>var.aaple <span class="ot">&lt;-</span> <span class="fu">ts</span>(var.aaple, <span class="at">start =</span> N <span class="sc">+</span> <span class="dv">1</span>)</span></code></pre></div>
<p>Vykreslíme do jedného grafu</p>
<div class="sourceCode" id="cb109"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>pallete <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="st">&quot;#D55E00&quot;</span>,<span class="st">&quot;black&quot;</span>)</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(vynosy, <span class="at">series =</span> <span class="st">&quot;Vynosy applu&quot;</span>)<span class="sc">+</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(var.aaple, <span class="at">series =</span> <span class="st">&quot;VaR 95%&quot;</span>)<span class="sc">+</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values=</span>pallete)<span class="sc">+</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Porovanie vynosov a VaR na 5% hladine&quot;</span>)</span></code></pre></div>
<p><img src="Cvicenie6_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<p>Vypočítame si % prekročení VaR</p>
<div class="sourceCode" id="cb110"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>pocet <span class="ot">&lt;-</span> <span class="fu">sum</span>(vynosy[(N <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">:</span><span class="fu">length</span>(vynosy)] <span class="sc">&lt;</span> var.aaple[<span class="sc">-</span><span class="fu">length</span>(var.aaple)])</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>pocet</span></code></pre></div>
<pre><code>## [1] 16</code></pre>
<div class="sourceCode" id="cb112"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>perc <span class="ot">&lt;-</span> <span class="dv">100</span><span class="sc">*</span>pocet<span class="sc">/</span><span class="fu">length</span>(var.aaple[<span class="sc">-</span><span class="fu">length</span>(var.aaple)])</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>perc</span></code></pre></div>
<pre><code>## [1] 7.619048</code></pre>
<p>Vidíme, že frekvencia prekorčení je odosť viac ako 5% (dá sa testovať
napríklad Kupiecov test), teda náš model nie je úplne najvhodnejší na
výpočet value at risk (očividne sa príliš pomaly prispôsbuje zmenám v
disperzíi)). Rovnako by ešte trebalo testovať, či sú jednotlivé
prekročenia od seba nezávislé (opäť existuje test Christoffersenov
test).</p>
</div>
</div>
<div id="poznámky" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Poznámky</h1>
<ul>
<li><p>Dájú sa odhadovať aj iné ako normálne rozdelenia. Napríklad pre
finančné časové rady platí, že ich rozdelenia majú ťažšie chvosty ako
normálne rozdelenie, zaroveň môžu pochádzať zo šikmého rozdelenia
(záporne hodnoty nastavajú častejšie ako kladné). V
<code>garchFit</code> sa dá vložiť aj parameter <code>cond.dist</code>,
ktorý špecifikuje aké rozdelenie chceme fitovať. Napríklad
<code>"std"</code> alebo <code>"sstd"</code>, čo značí štandardné
studentovo a zošikmené studenentovo rozdelenie.</p></li>
<li><p>Funkcia <code>garchFit</code> z balíka <code>fGarch</code> ponúka
fitovať aj iný typ GARCH modelov, tak ako je to spomenuté na konci
prednášky. Konkrétne môžete fitovať APARCH, čo je skratka pre assymetric
power GARCH model. Do funcie sa to vklada na, tak ako GARCH model, teda
<code>~ apaarch(1,1)</code> napríklad.</p></li>
<li><p>Na odhadovanie GARCHOV v R máme viac balíkov. Taký, ktoré je asi
najviac používaný je <code>rugarch</code>, pre jednorozmerné,
<code>rmgarch</code> pre viacrozmerné GARCH modely. Okrem iného v tomto
balíku je možnosť fitovať väčšie množstvo rozdielnych zovšeobecnení
GARCH modelov ako sú <code>“sGARCH”</code>, <code>“fGARCH”</code>,
<code>“eGARCH”</code>, <code>“gjrGARCH”</code>, <code>“apARCH”</code>
and <code>“iGARCH”</code> and <code>“csGARCH”</code>.</p></li>
<li><p>Value at Risk má svoje nedostatky, ako bolo spomenuté na
prednáške. Existujú aj iné, lepšie miery rizika ako napríklad Expected
Shortfall.</p></li>
<li><p>Pri výpočte VaR nie je nutné aby sa každý deň rekalibroval model.
Treba ale potom pri predikovaní volatilty použiť skutočné hodnoty pre
<span class="math inline">\(u_{t}\)</span>, ktoré získame tak, že
použijeme pozorovanú hodnotu pre časový rad v daný deň.</p></li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
